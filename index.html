<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“° æˆ‘çš„æ–°èèšåˆ</title>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
        }
body {
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
padding: 20px;
        }
.container {
max-width: 1200px;
margin: 0 auto;
        }
/* Header æ¨£å¼ */
header {
background: white;
padding: 30px;
border-radius: 15px;
box-shadow: 0 10px 30px rgba(0,0,0,0.2);
margin-bottom: 30px;
        }
.header-top {
text-align: center;
margin-bottom: 25px;
        }
h1 {
color: #667eea;
font-size: 2.5em;
margin-bottom: 10px;
        }
.stats {
display: flex;
justify-content: center;
gap: 20px;
flex-wrap: wrap;
margin-top: 15px;
        }
.stat-item {
color: #666;
font-size: 0.9em;
        }
.stat-number {
font-weight: bold;
color: #667eea;
        }
/* æœå°‹æ¡† */
.search-box {
margin-bottom: 20px;
        }
.search-input {
width: 100%;
padding: 15px 20px;
border: 2px solid #e0e0e0;
border-radius: 25px;
font-size: 1em;
transition: all 0.3s;
        }
.search-input:focus {
outline: none;
border-color: #667eea;
box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
/* ç¯©é¸å™¨ */
.filters {
display: flex;
flex-direction: column;
gap: 15px;
        }
.filter-section {
display: flex;
flex-wrap: wrap;
gap: 10px;
align-items: center;
        }
.filter-label {
font-weight: 600;
color: #333;
min-width: 80px;
        }
.filter-buttons {
display: flex;
gap: 10px;
flex-wrap: wrap;
flex: 1;
        }
.filter-btn {
padding: 10px 20px;
border: 2px solid #667eea;
background: white;
color: #667eea;
border-radius: 25px;
cursor: pointer;
font-size: 0.9em;
transition: all 0.3s;
white-space: nowrap;
        }
.filter-btn:hover {
background: #f0f0f0;
        }
.filter-btn.active {
background: #667eea;
color: white;
        }
/* çµæœè³‡è¨Š */
.results-info {
background: white;
padding: 15px 25px;
border-radius: 10px;
box-shadow: 0 3px 10px rgba(0,0,0,0.1);
margin-bottom: 20px;
display: flex;
justify-content: space-between;
align-items: center;
flex-wrap: wrap;
gap: 10px;
        }
.results-count {
color: #666;
font-size: 0.95em;
        }
.clear-filters {
padding: 8px 16px;
background: #ff6b6b;
color: white;
border: none;
border-radius: 20px;
cursor: pointer;
font-size: 0.85em;
transition: all 0.3s;
        }
.clear-filters:hover {
background: #ff5252;
        }
.clear-filters.hidden {
display: none;
        }
/* æ–°èç¶²æ ¼ */
.news-grid {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
gap: 20px;
        }
.news-card {
background: white;
padding: 25px;
border-radius: 15px;
box-shadow: 0 5px 15px rgba(0,0,0,0.1);
transition: all 0.3s;
display: flex;
flex-direction: column;
gap: 15px;
        }
.news-card:hover {
transform: translateY(-5px);
box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
.news-title {
font-size: 1.15em;
color: #333;
text-decoration: none;
display: block;
font-weight: 600;
line-height: 1.5;
flex: 1;
        }
.news-title:hover {
color: #667eea;
        }
.news-meta {
display: flex;
gap: 10px;
font-size: 0.85em;
color: #666;
flex-wrap: wrap;
        }
.badge {
background: #667eea;
color: white;
padding: 5px 12px;
border-radius: 12px;
font-size: 0.85em;
white-space: nowrap;
        }
.badge.travel {
background: #f093fb;
        }
.source-tag {
color: #888;
font-size: 0.85em;
display: flex;
align-items: center;
gap: 5px;
        }
/* ä¾†æºåœ–æ¨™ */
.source-icon {
display: inline-block;
width: 16px;
height: 16px;
        }
/* è¼‰å…¥å‹•ç•« */
.loading {
text-align: center;
color: white;
font-size: 1.2em;
padding: 50px;
        }
.spinner {
border: 4px solid rgba(255,255,255,0.3);
border-top: 4px solid white;
border-radius: 50%;
width: 50px;
height: 50px;
animation: spin 1s linear infinite;
margin: 20px auto;
        }
@keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
/* éŒ¯èª¤è¨Šæ¯ */
.error {
background: #ff6b6b;
color: white;
padding: 20px;
border-radius: 10px;
text-align: center;
        }
/* ç©ºç‹€æ…‹ */
.empty-state {
background: white;
padding: 60px 20px;
border-radius: 15px;
text-align: center;
box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
.empty-state-icon {
font-size: 4em;
margin-bottom: 15px;
        }
.empty-state-text {
color: #666;
font-size: 1.1em;
        }
/* è¿”å›é ‚éƒ¨æŒ‰éˆ• */
.back-to-top {
position: fixed;
bottom: 30px;
right: 30px;
background: #667eea;
color: white;
width: 50px;
height: 50px;
border-radius: 50%;
border: none;
cursor: pointer;
font-size: 1.5em;
box-shadow: 0 5px 15px rgba(0,0,0,0.3);
transition: all 0.3s;
opacity: 0;
visibility: hidden;
        }
.back-to-top.visible {
opacity: 1;
visibility: visible;
        }
.back-to-top:hover {
background: #5568d3;
transform: translateY(-3px);
        }
/* éŸ¿æ‡‰å¼è¨­è¨ˆ */
@media (max-width: 768px) {
body {
padding: 10px;
            }
h1 {
font-size: 2em;
            }
header {
padding: 20px;
            }
.news-grid {
grid-template-columns: 1fr;
            }
.filter-section {
flex-direction: column;
align-items: flex-start;
            }
.filter-label {
width: 100%;
            }
.results-info {
flex-direction: column;
align-items: flex-start;
            }
.back-to-top {
bottom: 20px;
right: 20px;
            }
        }
</style>
</head>
<body>
<div class="container">
<header>
<div class="header-top">
<h1>ğŸ“° æˆ‘çš„æ–°èèšåˆ</h1>
<div class="stats">
<div class="stat-item">
                        æ›´æ–°æ™‚é–“: <span id="updateTime" class="stat-number">è¼‰å…¥ä¸­...</span>
</div>
<div class="stat-item">
                        ç¸½æ–‡ç« æ•¸: <span id="totalCount" class="stat-number">0</span>
</div>
</div>
</div>
<!-- æœå°‹æ¡† -->
<div class="search-box">
<input 
type="text" 
id="searchInput" 
class="search-input" 
placeholder="ğŸ” æœå°‹æ–°èæ¨™é¡Œ..."
>
</div>
<!-- ç¯©é¸å™¨ -->
<div class="filters">
<div class="filter-section">
<span class="filter-label">åˆ†é¡:</span>
<div class="filter-buttons" id="categoryFilters">
<button class="filter-btn active" data-type="category" data-value="all">å…¨éƒ¨</button>
</div>
</div>
<div class="filter-section">
<span class="filter-label">ä¾†æº:</span>
<div class="filter-buttons" id="sourceFilters">
<button class="filter-btn active" data-type="source" data-value="all">å…¨éƒ¨</button>
</div>
</div>
</div>
</header>
<!-- çµæœè³‡è¨Š -->
<div class="results-info" id="resultsInfo" style="display: none;">
<span class="results-count" id="resultsCount">é¡¯ç¤º 0 ç¯‡æ–°è</span>
<button class="clear-filters hidden" id="clearFilters">æ¸…é™¤ç¯©é¸</button>
</div>
<!-- æ–°èå®¹å™¨ -->
<div id="newsContainer" class="loading">
<div class="spinner"></div>
<p>æ­£åœ¨è¼‰å…¥æ–°è...</p>
</div>
</div>
<!-- è¿”å›é ‚éƒ¨æŒ‰éˆ• -->
<button class="back-to-top" id="backToTop">â†‘</button>
<script>
// å…¨åŸŸè®Šæ•¸
let allNews = [];
let currentFilters = {
category: 'all',
source: 'all',
search: ''
        };

// ä¾†æºåœ–æ¨™æ˜ å°„ï¼ˆå¯é¸ï¼‰
const sourceIcons = {
'Unwire.hk': 'ğŸ’»',
'NewMobileLife': 'ğŸ“±',
'FlyDayhk': 'ğŸ«',
'HolidaySmart': 'âœˆï¸',
'MEETHK': 'âœˆï¸'
        };

// è¼‰å…¥æ–°èæ•¸æ“š
async function loadNews() {
try {
const response = await fetch('news.json');
if (!response.ok) {
throw new Error('ç„¡æ³•è¼‰å…¥æ–°èæ•¸æ“š');
                }
const data = await response.json();
allNews = data.news || [];
                
// æ›´æ–°é é¢è³‡è¨Š
document.getElementById('updateTime').textContent = data.update_time || 'æœªçŸ¥';
document.getElementById('totalCount').textContent = data.total_count || allNews.length;
                
// åˆå§‹åŒ–ç¯©é¸å™¨
initializeFilters();
                
// é¡¯ç¤ºæ–°è
displayNews(allNews);
                
// é¡¯ç¤ºçµæœè³‡è¨Š
document.getElementById('resultsInfo').style.display = 'flex';
            } catch (error) {
showError('è¼‰å…¥æ–°èå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦');
console.error('Error:', error);
            }
        }

// åˆå§‹åŒ–ç¯©é¸å™¨
function initializeFilters() {
// è‡ªè¨‚åˆ†é¡é †åº
const categoryOrder = ['ç§‘æŠ€', 'æ—…éŠ'];
            
// ç²å–æ‰€æœ‰åˆ†é¡ä¸¦æŒ‰è‡ªè¨‚é †åºæ’åº
const allCategories = allNews.map(item => item.category);
const categories = [...new Set(allCategories)]
                .sort((a, b) => {
const indexA = categoryOrder.indexOf(a);
const indexB = categoryOrder.indexOf(b);
if (indexA === -1) return 1;
if (indexB === -1) return -1;
return indexA - indexB;
                });
                
const categoryContainer = document.getElementById('categoryFilters');
categories.forEach(category => {
const btn = document.createElement('button');
btn.className = 'filter-btn';
btn.dataset.type = 'category';
btn.dataset.value = category;
btn.textContent = category;
categoryContainer.appendChild(btn);
            });
            
// ç²å–æ‰€æœ‰ä¾†æº
const sources = [...new Set(allNews.map(item => item.source))].sort();
const sourceContainer = document.getElementById('sourceFilters');
sources.forEach(source => {
const btn = document.createElement('button');
btn.className = 'filter-btn';
btn.dataset.type = 'source';
btn.dataset.value = source;
// æ·»åŠ åœ–æ¨™ï¼ˆå¦‚æœæœ‰å®šç¾©ï¼‰
const icon = sourceIcons[source] || '';
btn.textContent = icon ? `${icon} ${source}` : source;
sourceContainer.appendChild(btn);
            });
        }

// é¡¯ç¤ºæ–°è
function displayNews(newsArray) {
const container = document.getElementById('newsContainer');
            
// æ›´æ–°çµæœè¨ˆæ•¸
document.getElementById('resultsCount').textContent = 
`é¡¯ç¤º ${newsArray.length} ç¯‡æ–°è`;
            
if (newsArray.length === 0) {
container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“­</div>
                        <div class="empty-state-text">æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„æ–°è</div>
                    </div>
                `;
return;
            }
            
container.className = 'news-grid';
container.innerHTML = newsArray.map(item => {
const icon = sourceIcons[item.source] || 'ğŸ“°';
return `
                    <div class="news-card" data-category="${item.category}" data-source="${item.source}">
                        <a href="${item.link}" target="_blank" rel="noopener noreferrer" class="news-title">
${highlightSearchTerm(item.title, currentFilters.search)}
                        </a>
                        <div class="news-meta">
                            <span class="badge ${item.category === 'æ—…éŠ' ? 'travel' : ''}">${item.category}</span>
                            <span class="source-tag">
                                <span class="source-icon">${icon}</span>
                                ${item.source}
                            </span>
                        </div>
                    </div>
                `;
            }).join('');
        }

// é«˜äº®æœå°‹é—œéµå­—
function highlightSearchTerm(text, searchTerm) {
if (!searchTerm) return text;
const regex = new RegExp(`(${searchTerm})`, 'gi');
return text.replace(regex, '<mark style="background: #ffeb3b; padding: 2px 4px; border-radius: 3px;">$1</mark>');
        }

// ç¯©é¸æ–°è
function filterNews() {
let filtered = allNews;
            
// åˆ†é¡ç¯©é¸
if (currentFilters.category !== 'all') {
filtered = filtered.filter(item => item.category === currentFilters.category);
            }
            
// ä¾†æºç¯©é¸
if (currentFilters.source !== 'all') {
filtered = filtered.filter(item => item.source === currentFilters.source);
            }
            
// æœå°‹ç¯©é¸
if (currentFilters.search) {
filtered = filtered.filter(item => 
item.title.toLowerCase().includes(currentFilters.search.toLowerCase())
                );
            }
            
displayNews(filtered);
updateClearButton();
        }

// æ›´æ–°æ¸…é™¤æŒ‰éˆ•ç‹€æ…‹
function updateClearButton() {
const clearBtn = document.getElementById('clearFilters');
const hasActiveFilters = 
currentFilters.category !== 'all' || 
currentFilters.source !== 'all' || 
currentFilters.search !== '';
                
if (hasActiveFilters) {
clearBtn.classList.remove('hidden');
            } else {
clearBtn.classList.add('hidden');
            }
        }

// æ¸…é™¤æ‰€æœ‰ç¯©é¸
function clearAllFilters() {
currentFilters = {
category: 'all',
source: 'all',
search: ''
            };
            
// é‡ç½®æŒ‰éˆ•ç‹€æ…‹
document.querySelectorAll('.filter-btn').forEach(btn => {
btn.classList.remove('active');
if (btn.dataset.value === 'all') {
btn.classList.add('active');
                }
            });
            
// æ¸…é™¤æœå°‹æ¡†
document.getElementById('searchInput').value = '';
            
// é‡æ–°é¡¯ç¤º
filterNews();
        }

// é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯
function showError(message) {
document.getElementById('newsContainer').innerHTML = 
`<div class="error">âš ï¸ ${message}</div>`;
        }

// ç¯©é¸æŒ‰éˆ•é»æ“Šäº‹ä»¶
document.addEventListener('click', (e) => {
if (e.target.classList.contains('filter-btn')) {
const type = e.target.dataset.type;
const value = e.target.dataset.value;
                
// æ›´æ–°æŒ‰éˆ•ç‹€æ…‹
const siblings = e.target.parentElement.querySelectorAll('.filter-btn');
siblings.forEach(btn => btn.classList.remove('active'));
e.target.classList.add('active');
                
// æ›´æ–°ç¯©é¸æ¢ä»¶
currentFilters[type] = value;
                
// åŸ·è¡Œç¯©é¸
filterNews();
            }
        });

// æœå°‹åŠŸèƒ½
let searchTimeout;
document.getElementById('searchInput').addEventListener('input', (e) => {
clearTimeout(searchTimeout);
searchTimeout = setTimeout(() => {
currentFilters.search = e.target.value.trim();
filterNews();
            }, 300);
        });

// æ¸…é™¤ç¯©é¸æŒ‰éˆ•
document.getElementById('clearFilters').addEventListener('click', clearAllFilters);

// è¿”å›é ‚éƒ¨åŠŸèƒ½
const backToTopBtn = document.getElementById('backToTop');
window.addEventListener('scroll', () => {
if (window.pageYOffset > 300) {
backToTopBtn.classList.add('visible');
            } else {
backToTopBtn.classList.remove('visible');
            }
        });

backToTopBtn.addEventListener('click', () => {
window.scrollTo({
top: 0,
behavior: 'smooth'
            });
        });

// é é¢è¼‰å…¥æ™‚åŸ·è¡Œ
document.addEventListener('DOMContentLoaded', loadNews);
</script>
</body>
</html>